# –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º –ù–õ–ü / NLP Metaprograms Calibration

Production-ready NLP metaprograms calibration tool with support for overlapping marks, timer, and statistics. Built with Next.js 16, React 19, and shadcn/ui.

**üéØ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º –ù–õ–ü**

## Features

### 29 NLP Metaprograms Included

**1. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∏—Ä–∞ –ø–æ (9 —Ç–∏–ø–æ–≤)**
- –õ—é–¥–∏, –¶–µ–Ω–Ω–æ—Å—Ç–∏, –†–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ü—Ä–æ—Ü–µ—Å—Å—ã, –ü—Ä–æ—Ü–µ–¥—É—Ä—ã, –í–µ—â–∏, –î–µ–π—Å—Ç–≤–∏—è, –í—Ä–µ–º—è, –ú–µ—Å—Ç–æ

**2. –°—Ç–∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (8 —Ç–∏–ø–æ–≤)**
- –†–∞–∑–º–µ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞: –ö—Ä—É–ø–Ω—ã–π/–ú–∞–ª—ã–π
- –°–ø–æ—Å–æ–± –º—ã—à–ª–µ–Ω–∏—è: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è/–ê–Ω–∞–ª–æ–≥–∏—è/–û–±–æ–±—â–µ–Ω–∏–µ
- –í–µ–¥—É—â–∞—è —Å–µ–Ω—Å–æ—Ä–Ω–∞—è —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: –í–∏–∑—É–∞–ª—å–Ω–∞—è/–ê—É–¥–∏–∞–ª—å–Ω–∞—è/–ö–∏–Ω–µ—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∞—è

**3. –§–æ–∫—É—Å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (2 —Ç–∏–ø–∞)**
- –°—Ö–æ–¥—Å—Ç–≤–æ, –†–∞–∑–ª–∏—á–∏–µ

**4. –ú–æ—Ç–∏–≤–∞—Ü–∏—è (2 —Ç–∏–ø–∞)**
- –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ: –∫ –ø–æ–∑–∏—Ç–∏–≤—É / –ò–∑–±–µ–≥–∞–Ω–∏–µ: –æ—Ç –Ω–µ–≥–∞—Ç–∏–≤–∞

**5. –†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è (—Ñ–æ–∫—É—Å —Å–∏–ª—ã) (3 —Ç–∏–ø–∞)**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è, –í–Ω–µ—à–Ω—è—è (–Ω–∞ –¥—Ä—É–≥–∏—Ö), –í–Ω–µ—à–Ω—è—è (–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç/—Å–∏—Å—Ç–µ–º—É)

**6. –í—Ä–µ–º—è (5 —Ç–∏–ø–æ–≤)**
- –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: –ü—Ä–æ—à–ª–æ–µ/–ù–∞—Å—Ç–æ—è—â–µ–µ/–ë—É–¥—É—â–µ–µ
- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –í–∫–ª—é—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è/–°–∫–≤–æ–∑–Ω–æ–µ –≤—Ä–µ–º—è

### Core Functionality
- **Advanced Text Annotation**: Highlight and annotate text with multiple overlapping marks
- **29 Pre-configured NLP Metaprograms**: Full hierarchy organized by 6 main categories
- **Custom Annotation Types**: Create, edit, and manage your own metaprograms
- **Overlapping Mark Support**: Handle complex, non-hierarchical annotations seamlessly
- **Selection Modes**: Character, Word, Sentence, and Paragraph-level selection

### Calibration Features
- ‚è± **Built-in Timer**: Track your analysis speed with start/stop/reset controls
- üìä **Statistics Dashboard**: Real-time metrics including:
  - Analysis time (MM:SS format)
  - Total annotations count
  - Speed: annotations per minute
  - Character count
- üé® **Categorized UI**: Metaprograms organized by category for easy navigation
- üá∑üá∫ **Russian Language Support**: Full Cyrillic text support with sample text included
- üèÉ **Speed Training**: Compare and improve your calibration speed over time

### User Experience
- **Real-time Visual Feedback**: Color-coded highlights for each metaprogram
- **Keyboard Shortcuts**:
  - `Ctrl+Z` / `Cmd+Z`: –û—Ç–º–µ–Ω–∏—Ç—å (Undo)
  - `Ctrl+Y` / `Cmd+Y`: –ü–æ–≤—Ç–æ—Ä–∏—Ç—å (Redo)
  - `Ctrl+S` / `Cmd+S`: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (Save)
  - `1-9`: Quick-select metaprograms from first category
- **Undo/Redo**: Full history tracking (up to 50 operations)
- **Persistent Storage**: Auto-saves to localStorage
- **File Upload**: Load `.txt` and `.md` files
- **Export Options**:
  - JSON format (with complete annotation metadata)
  - Plain text format (with annotation list)

### Technical Excellence
- **TypeScript**: Full type safety across the entire codebase
- **Production-Ready**: Error boundaries, loading states, and proper error handling
- **Responsive Design**: Works on all screen sizes
- **Accessibility**: ARIA patterns and keyboard navigation
- **Performance**: Optimized rendering for large texts and many annotations

## Tech Stack

- **Framework**: Next.js 16 (App Router)
- **UI Library**: React 19
- **Styling**: Tailwind CSS 4
- **Components**: shadcn/ui (New York style)
- **Icons**: Lucide React
- **State Management**: React hooks (useState, useReducer)
- **Storage**: Browser localStorage API

## Getting Started

### Prerequisites
- Node.js 20+ (for Next.js 16 compatibility)
- npm or pnpm

### Installation

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Build for production
npm run build

# Start production server
npm start
```

Open [http://localhost:3000](http://localhost:3000) to see the application.

## How to Use

### 1. Start Timer (Optional)
- Click **"–°—Ç–∞—Ä—Ç"** to begin tracking your calibration speed
- Timer will auto-clear annotations and start from 00:00
- Click **"–°—Ç–æ–ø"** to pause, **"–°–±—Ä–æ—Å"** to reset

### 2. Load or Input Text
- Use the pre-loaded Russian sample text about metaprogramming
- Or paste your own text
- Or upload a `.txt` or `.md` file

### 3. Select Metaprogram Type
- Right panel shows all 27 metaprograms organized by category
- Click on any metaprogram to select it
- Use keyboard shortcuts (1-9) for first category quick access
- Color-coded for easy visual identification

### 4. Annotate Text
- Select the text you want to annotate
- Choose selection mode (Character/Word/Sentence/Paragraph)
- Click **"Mark Selection"** button
- Selected text will be highlighted with the chosen metaprogram color
- Click on any mark to view details or remove it

### 5. Review & Analyze
- **–°–ø–∏—Å–æ–∫ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π** panel shows all your annotations
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** panel displays:
  - –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ (analysis time)
  - –í—Å–µ–≥–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π (total annotations)
  - –°–∫–æ—Ä–æ—Å—Ç—å (speed in annotations/minute)
  - –°–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ (character count)
- See statistics grouped by metaprogram type

### 6. Save & Export
- Click **"Save to Browser"** (or Ctrl+S) to persist your work
- Export as JSON for data analysis
- Export as plain text for review

## Project Structure

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Root layout with metadata
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx            # Main NLP calibration page
‚îÇ   ‚îî‚îÄ‚îÄ globals.css         # Global styles & Tailwind config
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ annotation-types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nlp-type-selector.tsx # NLP metaprograms selector (categorized)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ type-manager.tsx      # Type CRUD operations
‚îÇ   ‚îú‚îÄ‚îÄ text-editor/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text-input.tsx        # Text input with file upload
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text-editor.tsx       # Main editor component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marked-text.tsx       # Rendered text with overlapping marks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marks-list.tsx        # Annotation list panel
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export-menu.tsx       # Export functionality
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       # shadcn/ui components (54 components)
‚îÇ   ‚îî‚îÄ‚îÄ error-boundary.tsx        # Error handling
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-text-selection.ts     # Text selection with mode snapping
‚îÇ   ‚îú‚îÄ‚îÄ use-marking-state.ts      # State + undo/redo (50 levels)
‚îÇ   ‚îî‚îÄ‚îÄ use-keyboard-shortcuts.ts # Keyboard shortcuts handler
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                  # Tailwind utility
‚îÇ   ‚îú‚îÄ‚îÄ text-processing.ts        # Tokenization & boundary detection
‚îÇ   ‚îú‚îÄ‚îÄ mark-operations.ts        # Mark CRUD + overlapping rendering
‚îÇ   ‚îú‚îÄ‚îÄ storage.ts                # localStorage + export (JSON/text)
‚îÇ   ‚îî‚îÄ‚îÄ nlp-metaprograms.ts       # 27 NLP metaprograms + categories
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ annotation.ts             # TypeScript interfaces
```

## Customization

### Adding Custom Annotation Types

```typescript
const customType: AnnotationType = {
  id: "custom-id",
  name: "Custom Type",
  color: "#ff6b6b",
  description: "My custom annotation type",
  shortcut: "9",
};
```

### Modifying Selection Behavior

Edit `src/lib/text-processing.ts` to customize how text boundaries are detected:
- `findWordBoundaries()`: Word-level selection
- `findSentenceBoundaries()`: Sentence-level selection
- `findParagraphBoundaries()`: Paragraph-level selection

## Browser Support

- Chrome/Edge 90+
- Firefox 88+
- Safari 15+

Requires modern JavaScript features:
- `crypto.randomUUID()`
- `localStorage` API
- ES6+ syntax

## Performance Notes

- **Optimal**: < 10,000 characters, < 100 annotations
- **Good**: 10,000-50,000 characters, < 500 annotations
- **Fair**: 50,000+ characters, 500+ annotations

For very large texts, consider chunking the input into smaller sections.

## Contributing

This is a production-ready template. Feel free to:
- Add new annotation types
- Implement additional export formats
- Add collaboration features
- Integrate with backend storage
- Add AI-powered annotation suggestions

## License

MIT - Feel free to use in your projects!

## Support

For issues or questions, please check:
- TypeScript errors: Ensure all types are properly imported
- Build errors: Run `npm install` and `npm run build`
- Runtime errors: Check browser console for details

Built with ‚ù§Ô∏è using Next.js 16, React 19, and shadcn/ui
